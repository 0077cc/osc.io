<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Osc.io by catshirt</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Osc.io</h1>
        <p>send and receive osc messages via socket.io</p>

        <p class="view"><a href="https://github.com/catshirt/osc.io">View the Project on GitHub <small>catshirt/osc.io</small></a></p>


        <ul>
          <li><a href="https://github.com/catshirt/osc.io/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/catshirt/osc.io/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/catshirt/osc.io">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>osc.io</h1>

<p>osc.io proxies osc messages from standard sockets to the browser using socket.io.</p>

<h2>installation</h2>

<pre><code>$ npm install osc.io
</code></pre>

<h2>configuration</h2>

<p>to expose the proper endpoints from the server, you must pass your socket.io instance to osc.io.</p>

<pre><code>var http = require('http'),
  socketio = require('socket.io'),
  osc = require('osc.io'),
  server = http.createServer(),
  io = socketio.listen(server);

osc(io);
server.listen(80);
</code></pre>

<p>this will create two socket.io namespaces, <code>/osc/servers/:port</code> and <code>/osc/clients/:port</code>, to manage osc servers and osc clients respectively. possible port values are restricted to <code>6000</code> to <code>12000</code>. each namespace can listen or emit <code>message</code> events to receive and send osc messages.</p>

<p>in the example below, we create an osc client/server in the browser and send messages from one to the other. of course, the client or server could be any osc device.</p>

<pre><code>var server = io.connect('http://localhost/osc/servers/8000'),
  client = io.connect('http://localhost/osc/clients/8000');

server.on('message', function(message) {
  console.log(message);
});

setInterval(function() {
  client.emit('message', ['/osc/test', 200]);
}, 500);
</code></pre>

<p>by default, client devices broadcast to 127.0.0.1. to modify the host value of a client, your client must emit a message containing the host.</p>

<pre><code>client.emit('set-host', DEVICE_IP);
</code></pre>

<h2>todo</h2>

<ul>
<li><p>to enable multiple clients and servers, port must be passed in through the socket namespace to ensure each device has a unique client socket (socket.io creates only one socket per namespace). host cannot be passed in like port, since socket.io does not allow for variable namespace names. this makes creating a graceful connection api difficult. a proper api for managing device hosts and ports would be nice.</p></li>
<li><p>with socket.io lacking variable namespaces, i decided to create hannel name handlers only for ports 6000 - 12000 because i am afraid to see what happens if i create 6x,xxx channels. ideally, i'd like to handle truly variable port values.</p></li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/catshirt">catshirt</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-37581591-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>